<script src="https://cdn.socket.io/4.5.3/socket.io.min.js" integrity="sha384-WPFUvHkB1aHA5TDSZi6xtDgkF0wXJcIIxXhC6h8OT8EH3fC5PWro5pWJ1THjcfEi" crossorigin="anonymous"></script>
<script>
    console.log("js en el cliente");
    const socket = io();

    socket.on("products",(products)=>{
        console.log({ products });
        const productListHTML = products.map(productItems => `
        <tr>
              <th scope="col">${productItems.nombre}</th>
              <th scope="col">${productItems.precio}</th>
              <th scope="col">
                <img src = ${productItems.url} style="height: 40px"/>
                </th>
            </tr>
        `).join("");
        const productList = document.getElementById ("productList")
        productList.innerHTML = productListHTML;
    });

//chat
    socket.on('conversation', (messages) => {
    const messagesHtml = messages.map((message) => `
      <div>
        <strong style= "color: blue">${message.mail}:  </strong>
        <i style= "color: green">${message.text}</i>
      </div>
    `)
    .join(' ');

  document.getElementById("messages").innerHTML = messagesHtml;
});

const form = document.getElementById("form")

form.addEventListener("submit", (event) => {
  event.preventDefault();

  const mail = document.getElementById('mail').value;
  const text = document.getElementById('text').value;
  const message = { mail, text }
  socket.emit('new-message', message);
});

</script>